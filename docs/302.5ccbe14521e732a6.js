"use strict";(self.webpackChunkadminportal=self.webpackChunkadminportal||[]).push([[302],{4302:(K,g,n)=>{n.r(g),n.d(g,{UsersModule:()=>O});var f=n(6895),c=n(9371),o=n(433),p=n(145),A=n(9483),u=n(2340),e=n(8256),v=n(7185),h=n(4691);function b(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"First Name is required"),e.qZA())}function Z(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"First Name min length should be 3 char long"),e.qZA())}function T(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"First Name max length should be 10 char long"),e.qZA())}function x(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,b,2,0,"div",23),e.YNc(2,Z,2,0,"div",23),e.YNc(3,T,2,0,"div",23),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ctrl.firstName.errors.required),e.xp6(1),e.Q6J("ngIf",r.ctrl.firstName.errors.minlength),e.xp6(1),e.Q6J("ngIf",r.ctrl.firstName.errors.maxlength)}}function C(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Last Name is required"),e.qZA())}function N(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Last Name min length should be 3 char long"),e.qZA())}function I(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Last Name max length should be 10 char long"),e.qZA())}function q(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,C,2,0,"div",23),e.YNc(2,N,2,0,"div",23),e.YNc(3,I,2,0,"div",23),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ctrl.lastName.errors.required),e.xp6(1),e.Q6J("ngIf",r.ctrl.lastName.errors.minlength),e.xp6(1),e.Q6J("ngIf",r.ctrl.lastName.errors.maxlength)}}function w(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is required"),e.qZA())}function y(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Email is should be valid email address"),e.qZA())}function J(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,w,2,0,"div",23),e.YNc(2,y,2,0,"div",23),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ctrl.email.errors.required),e.xp6(1),e.Q6J("ngIf",r.ctrl.email.errors.pattern)}}function Y(t,i){if(1&t&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&t){const r=i.$implicit;e.Q6J("value",r.id),e.xp6(1),e.Oqu(r.name)}}function S(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"User Type is required"),e.qZA())}function Q(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,S,2,0,"div",23),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ctrl.userTypeId.errors.required)}}function P(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function F(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be 8 char long contains lowercase , uppercase, number and special chars"),e.qZA())}function k(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,P,2,0,"div",23),e.YNc(2,F,2,0,"div",23),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ctrl.password.errors.required),e.xp6(1),e.Q6J("ngIf",r.ctrl.password.errors.pattern)}}function L(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Confirm Password is required"),e.qZA())}function B(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Pasword and Confirm Password should be same"),e.qZA())}function M(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,L,2,0,"div",23),e.YNc(2,B,2,0,"div",23),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.ctrl.confirmPassword.errors.required),e.xp6(1),e.Q6J("ngIf",r.ctrl.confirmPassword.errors.mustMatch)}}const m=function(t){return{"is-invalid":t}};let E=(()=>{class t{constructor(r,s,d,a,l){this.route=r,this._fb=s,this._toastr=d,this._httpService=a,this.router=l,this.userId=0,this.submitted=!1,this.objUserTypes=[],this.buttonText="",this.route.queryParams.subscribe(z=>{this.userId=z.userId})}ngOnInit(){this.setRegisterForm(),this.getUserTypes(),this.userId&&null!=this.userId&&this.userId>0&&(this.buttonText="Update",this.dbops=p.m.update,this.getUserById(this.userId))}setRegisterForm(){this.buttonText="Add",this.dbops=p.m.create,this.addForm=new o.cw({id:new o.NI(0),firstName:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(3),o.kI.maxLength(10)])),lastName:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(3),o.kI.maxLength(10)])),email:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")])),userTypeId:new o.NI("",o.kI.required),password:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-zd$@$!%*?&].{8,}")])),confirmPassword:new o.NI("",o.kI.required)},(0,A.Sk)("password","confirmPassword"))}get ctrl(){return this.addForm.controls}getUserById(r){this._httpService.get(u.N.BASE_API_PATH+"UserMaster/GetbyId/"+r).subscribe(s=>{s.isSuccess?this.addForm.patchValue(s.data):this._toastr.error(s.errors[0],"Add User")})}getUserTypes(){this._httpService.get(u.N.BASE_API_PATH+"UserType/GetAll").subscribe(r=>{r.isSuccess?this.objUserTypes=r.data:this._toastr.error(r.errors[0],"Add User")})}register(){if(this.submitted=!0,!this.addForm.invalid)switch(this.dbops){case p.m.create:this._httpService.post(u.N.BASE_API_PATH+"UserMaster/Save/",this.addForm.value).subscribe(r=>{r.isSuccess?(this._toastr.success("User has been added successfully !!","Add User"),this.formReset(),this.router.navigate(["/users/list-user"])):this._toastr.error(r.errors[0],"Add User")});break;case p.m.update:this._httpService.post(u.N.BASE_API_PATH+"UserMaster/Update/",this.addForm.value).subscribe(r=>{r.isSuccess?(this._toastr.success("User data has been updated successfully done !!","Add User"),this.formReset(),this.router.navigate(["/users/list-user"])):this._toastr.error(r.errors[0],"Add User")})}}formReset(){this.addForm.reset(),this.submitted=!1,this.buttonText="Add",this.dbops=p.m.create}cancel(){this.formReset(),this.router.navigate(["/users/list-user"])}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(c.gz),e.Y36(o.qu),e.Y36(v._W),e.Y36(h.O),e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-user"]],decls:65,vars:27,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card","tab2-card"],[1,"card-header"],[1,"card-body","tab2-card"],[1,"form-horizontal","auth-form",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","validationCustom0",1,"col-xl-3","colmd-4"],["type","text","formControlName","firstName",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"col-xl-3","col-md-4"],["class","col-xl-3 col-md-4 invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["type","email","formControlName","email",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["formControlName","userTypeId",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","password","formControlName","password",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control","col-xl-8","col-md-7",3,"ngClass"],[1,"form-button"],["type","submit",1,"btn","btn-primary","mr-2"],["type","button",1,"btn","btn-danger",3,"click"],[1,"col-xl-3","col-md-4","invalid-feedback"],[4,"ngIf"],[3,"value"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5"),e._uU(6,"Add User"),e.qZA()(),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return s.register()}),e.TgZ(9,"div",7)(10,"label",8)(11,"span"),e._uU(12,"*"),e.qZA(),e._uU(13,"First Name"),e.qZA(),e._UZ(14,"input",9)(15,"div",10),e.YNc(16,x,4,3,"div",11),e.qZA(),e.TgZ(17,"div",7)(18,"label",8)(19,"span"),e._uU(20,"*"),e.qZA(),e._uU(21,"Last Name"),e.qZA(),e._UZ(22,"input",12)(23,"div",10),e.YNc(24,q,4,3,"div",11),e.qZA(),e.TgZ(25,"div",7)(26,"label",8)(27,"span"),e._uU(28,"*"),e.qZA(),e._uU(29,"Email "),e.qZA(),e._UZ(30,"input",13)(31,"div",10),e.YNc(32,J,3,2,"div",11),e.qZA(),e.TgZ(33,"div",7)(34,"label",8)(35,"span"),e._uU(36,"*"),e.qZA(),e._uU(37,"User Type "),e.qZA(),e.TgZ(38,"select",14)(39,"option",15),e._uU(40,"--Select User Type--"),e.qZA(),e.YNc(41,Y,2,2,"option",16),e.qZA(),e._UZ(42,"div",10),e.YNc(43,Q,2,1,"div",11),e.qZA(),e.TgZ(44,"div",7)(45,"label",8)(46,"span"),e._uU(47,"*"),e.qZA(),e._uU(48,"Password "),e.qZA(),e._UZ(49,"input",17)(50,"div",10),e.YNc(51,k,3,2,"div",11),e.qZA(),e.TgZ(52,"div",7)(53,"label",8)(54,"span"),e._uU(55,"*"),e.qZA(),e._uU(56,"Confirm Password "),e.qZA(),e._UZ(57,"input",18)(58,"div",10),e.YNc(59,M,3,2,"div",11),e.qZA(),e.TgZ(60,"div",19)(61,"button",20),e._uU(62),e.qZA(),e.TgZ(63,"button",21),e.NdJ("click",function(){return s.cancel()}),e._uU(64,"Cancel"),e.qZA()()()()()()()()),2&r&&(e.xp6(8),e.Q6J("formGroup",s.addForm),e.xp6(6),e.Q6J("ngClass",e.VKq(15,m,s.submitted&&s.ctrl.firstName.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.ctrl.firstName.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(17,m,s.submitted&&s.ctrl.lastName.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.ctrl.lastName.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(19,m,s.submitted&&s.ctrl.email.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.ctrl.email.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(21,m,s.submitted&&s.ctrl.userTypeId.errors)),e.xp6(3),e.Q6J("ngForOf",s.objUserTypes),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.ctrl.userTypeId.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(23,m,s.submitted&&s.ctrl.password.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.ctrl.password.errors),e.xp6(6),e.Q6J("ngClass",e.VKq(25,m,s.submitted&&s.ctrl.confirmPassword.errors)),e.xp6(2),e.Q6J("ngIf",s.submitted&&s.ctrl.confirmPassword.errors),e.xp6(3),e.Oqu(s.buttonText))},dependencies:[f.mk,f.sg,f.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u]}),t})();var H=n(5226),U=n.n(H),_=n(9585);function R(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){const a=e.CHM(r).row,l=e.oxw();return e.KtG(l.Edit(a.id))}),e.qZA(),e.TgZ(1,"button",17),e.NdJ("click",function(){const a=e.CHM(r).row,l=e.oxw();return e.KtG(l.Delete(a.id))}),e.qZA()}}const D=[{path:"",children:[{path:"list-user",component:(()=>{class t{constructor(r,s,d){this._httpService=r,this._toastr=s,this.router=d,this.objRows=[]}ngOnInit(){this.getData()}getData(){this._httpService.get(u.N.BASE_API_PATH+"UserMaster/GetAll").subscribe(r=>{r.isSuccess?this.objRows=r.data:this._toastr.error(r.errors[0],"User List")})}Edit(r){this.router.navigate(["/users/add-user"],{queryParams:{userId:r}})}Delete(r){let s={id:r};const d=U().mixin({customClass:{confirmButton:"btn btn-success mx-2",cancelButton:"btn btn-danger"},buttonsStyling:!1});d.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(a=>{a.isConfirmed?this._httpService.post(u.N.BASE_API_PATH+"UserMaster/Delete/",s).subscribe(l=>{l.isSuccess?(d.fire("Deleted!","Your record has been deleted.","success"),this.getData()):this._toastr.error(l.errors[0],"User Master")}):a.dismiss===U().DismissReason.cancel&&d.fire("Cancelled","Your record is safe :)","error")})}ngOnDestroy(){this.objRows=null}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(h.O),e.Y36(v._W),e.Y36(c.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-list-user"]],decls:19,vars:6,consts:[[1,"container-fluid"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"btn-popup","pull-right"],["routerLink","/users/add-user",1,"btn","btn-secondary"],["id","batchDelete",1,"category-table","custom-datatable","transcation-datatable","userimage"],[1,"table-responsive"],[1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit"],["name","First Name"],["name","Last Name"],["name","Email"],["name","User Type"],["name","Created Date","prop","createdOn"],["name","Actions"],["ngx-datatable-cell-template",""],["type","button",1,"fa","fa-edit","mt-2",2,"color","green",3,"click"],["type","button",1,"fa","fa-trash-o",2,"color","red",3,"click"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5"),e._uU(4,"User List"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"a",5),e._uU(8,"Add User"),e.qZA()(),e.TgZ(9,"div",6)(10,"div",7)(11,"ngx-datatable",8),e._UZ(12,"ngx-datatable-column",9)(13,"ngx-datatable-column",10)(14,"ngx-datatable-column",11)(15,"ngx-datatable-column",12)(16,"ngx-datatable-column",13),e.TgZ(17,"ngx-datatable-column",14),e.YNc(18,R,2,0,"ng-template",15),e.qZA()()()()()()()),2&r&&(e.xp6(11),e.Q6J("rows",s.objRows)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",5))},dependencies:[c.yS,_.nE,_.UC,_.vq]}),t})()},{path:"add-user",component:E}]}];let j=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[c.Bz.forChild(D),c.Bz]}),t})(),O=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[f.ez,j,o.UX,_.xD]}),t})()}}]);